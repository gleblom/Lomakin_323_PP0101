<UserControl x:Class="DocumentManagementService.Views.RoutesView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:DocumentManagementService.Views"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" 
             xmlns:graph="clr-namespace:DocumentManagementService" xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid Background="White">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="0">
            <StackPanel Orientation="Horizontal"/>
        </StackPanel>

        <ListBox Name="RoutesList" 
                 Grid.Row="1" Grid.Column="0"
                 Margin="10,10,10, 0"
                 VerticalAlignment="Stretch"
                 ItemsSource="{Binding Routes}"
                 SelectedItem="{Binding SelectedRoute}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="8">
                        <TextBlock Text="{Binding Name}" FontWeight="Bold" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="MouseDoubleClick">
                    <i:InvokeCommandAction 
                                Command="{Binding EditRouteCommand}"
                                CommandParameter="{Binding ElementName=RoutesList}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </ListBox>
        <Border Margin="10,10,10,0"
                Grid.Column="1" Grid.Row="1"
             BorderThickness="1">
            <graph:RouteGraphLayout x:Name="graphLayout" IsEnabled="False"
                    Graph="{Binding Graph}" LayoutAlgorithmType="Tree" 
                                    OverlapRemovalAlgorithmType="FSA" />
        </Border>
        <StackPanel Grid.Row="2">
            <Button x:Name="OnApprove"
                    Content="Отправить на согласование" Width="225"
                    Command="{Binding OnApproveCommand}"
                    Background="{x:Null}" 
                    BorderBrush="#FF040000"/>
        </StackPanel>
        <StackPanel Grid.Row="2" Grid.Column="1">
            <Button x:Name="Cancel"
                    Content="Назад" Width="140"
                    Command="{Binding CancelCommand}"
                    BorderBrush="Black"
                    Background="{x:Null}"/>
        </StackPanel>
        <Button Command="{Binding CreateRouteCommand}" Grid.Column="1" x:Name="NewRoute" Margin="86,2,156,2" Visibility="Collapsed" Background="{x:Null}" BorderBrush="{x:Null}">
            <StackPanel Orientation="Horizontal">
                <materialDesign:PackIcon Kind="Add"/>
                <TextBlock Text="Новый маршрут"/>
            </StackPanel>
        </Button>
    </Grid>
</UserControl>
